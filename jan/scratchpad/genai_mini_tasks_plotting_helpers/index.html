<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/highlight/styles/github.min.css"> <!-- bootstrap@5.3.1 and bootstrap icon@1.10--> <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel=stylesheet  integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin=anonymous > <link rel=stylesheet  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"> <link rel=stylesheet  href="/css/style.css"> <link rel=stylesheet  href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"> <link data-n-head=ssr  rel=stylesheet  href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons"> <link rel=stylesheet  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin=anonymous  referrerpolicy=no-referrer  /> <link rel=stylesheet  href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==" crossorigin=anonymous  referrerpolicy=no-referrer  /> <!-- favicon generated through https://realfavicongenerator.net/--> <link rel=apple-touch-icon  sizes=180x180  href="/assets/icon/apple-touch-icon.png"> <link rel=icon  type="image/png" sizes=32x32  href="/assets/icon/favicon-32x32.png"> <link rel=icon  type="image/png" sizes=16x16  href="/assets/icon/favicon-16x16.png"> <link rel=manifest  href="/assets/icon/site.webmanifest"> <link rel=mask-icon  href="/assets/icon/safari-pinned-tab.svg" color="#5bbad5"> <meta name=msapplication-TileColor  content="#da532c"> <meta name=theme-color  content="#ffffff"> <link rel=stylesheet  href="/_css/custom.css"> <title>GenAI Mini-Tasks: Automating the Little Helpers for Plotting</title> <header data-bs-theme=dark > <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark"> <div class=container > <a href="/" class="navbar-brand d-flex align-items-center"> <svg xmlns="http://www.w3.org/2000/svg" width=16  height=16  fill=currentColor  class="bi bi-journal-text me-2" viewBox="0 0 16 16"> <path d="M5 10.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"/> <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"/> <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"/> </svg> <strong>siml.earth</strong> </a> <button class=navbar-toggler  type=button  data-bs-toggle=collapse  data-bs-target="#navbarCollapse" aria-controls=navbarCollapse  aria-expanded=false  aria-label="Toggle navigation"> <span class=navbar-toggler-icon ></span> </button> <div class="collapse navbar-collapse" id=navbarCollapse > <ul class="navbar-nav me-auto mb-2 mb-md-0"> <li class="nav-item dropdown"> <a class="nav-link dropdown-toggle fw-bold" href="#" id=navbarDropdown  role=button  data-bs-toggle=dropdown  aria-expanded=false > Sites </a> <ul class=dropdown-menu  aria-labelledby=navbarDropdown > <li><h6 class=dropdown-header >Choose a Site</h6> <li><a class=dropdown-item  href="/jan/">Jan's Site</a> <li><a class=dropdown-item  href="/ann/">Ann's Site</a> </ul> <li class=nav-item ><hr class="dropdown-divider mx-2"> <li class=nav-item > <span class="navbar-text px-2 fw-bold d-flex align-items-center">Jan's:</span> <li class=nav-item > <a class=nav-link  aria-current=page  href="/jan/">Home</a> <li class=nav-item > <a class=nav-link  href="/jan/scratchpad/">Posts</a> <li class=nav-item > <a class=nav-link  href="/jan/wip/">Work in Progress</a> <li class=nav-item > <a class=nav-link  href="/jan/about/">About</a> <li class=nav-item > <a class=nav-link  href="/jan/tags/">Tags</a> <li class=nav-item > <a class=nav-link  href="/jan/privacy_policy/">Privacy Policy</a> <li class=nav-item > <a class=nav-link  href="/jan/cookie_policy/">Cookie Policy</a> </ul> </div> </div> </nav> </header> <div class="container py-3 px-3 mx-auto"> <div class=franklin-content ><h1 id=tldr ><a href="#tldr" class=header-anchor >TL;DR</a></h1> <p>GenAI Mini-Tasks harness the power of Generative AI to automate tedious tasks in data science, such as formatting plot labels, freeing up time for more complex challenges and enhancing overall productivity in projects using tools like Julia&#39;s PromptingTools.jl.</p> <p><div class=franklin-toc ><ol><li><a href="#tldr">TL;DR</a><ol><li><a href="#introduction">Introduction</a><li><a href="#the_small_tasks_challenge">The Small Tasks Challenge</a><li><a href="#genai_your_coding_assistant">GenAI: Your Coding Assistant</a><li><a href="#practical_example_streamlining_plot_labels">Practical Example: Streamlining Plot Labels</a><li><a href="#pro_tips">Pro Tips</a><li><a href="#conclusion">Conclusion</a><li><a href="#appendix">Appendix</a></ol></ol></div> </p> <h2 id=introduction ><a href="#introduction" class=header-anchor >Introduction</a></h2> <p>Welcome to the world of GenAI Mini-Tasks&#33; Here, we explore how Generative AI can revolutionize even the smallest tasks in your data analyses, saving your brain power and more you more effective.</p> <h2 id=the_small_tasks_challenge ><a href="#the_small_tasks_challenge" class=header-anchor >The Small Tasks Challenge</a></h2> <p>In data science, it&#39;s often the little things that eat up time - like tweaking plot labels or formatting data. These tasks are simple yet tedious, and they distract from the bigger picture.</p> <h2 id=genai_your_coding_assistant ><a href="#genai_your_coding_assistant" class=header-anchor >GenAI: Your Coding Assistant</a></h2> <p>Thanks to GenAI and tools like Julia&#39;s PromptingTools.jl, you can now delegate these mini-tasks to AI. Whether it&#39;s adjusting plot labels in Makie or something else, GenAI is here to help.</p> <h2 id=practical_example_streamlining_plot_labels ><a href="#practical_example_streamlining_plot_labels" class=header-anchor >Practical Example: Streamlining Plot Labels</a></h2> <p>As a case study, let&#39;s consider plot labels in data visualization. They vary in length and can mess up the aesthetics of your charts &#40;especially if you&#39;re creating many charts with the same layout but different data series&#41;. </p> <p><img src="/assets/genai_mini_tasks_plotting_helpers/barplot_legend_long.png" alt="Barplot with a bad legend" /></p> <p>We need a function to split the labels onto a new line whenever they exceed some width. Let&#39;s ask GenAI to generate a &#39;wrap string&#39; function to uniformly right-size these labels. The result? A handy function that automatically adjusts the text, saving us time and frustration.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> PromptingTools

<span class=hljs-comment ># if you need a reminder which Julia templates are available</span>
aitemplates(<span class=hljs-string >&quot;Julia&quot;</span>) 

<span class=hljs-comment ># call GPT-4 Turbo with the JuliaExpertAsk template</span>
msg = aigenerate(:JuliaExpertAsk; ask=<span class=hljs-string >&quot;Write a function `wrap_string`. It iterates over words and it will add a new line each time a maximum `text_width::Int=10` would be exceeded. Provide an example&quot;</span>, model=<span class=hljs-string >&quot;gpt4t&quot;</span>)</code></pre> <pre><code class="plaintext hljs">[ Info: Tokens: 350 @ Cost: $0.0086 in 7.9 seconds
AIMessage(&quot;Here is a function `wrap_string` that wraps words nto lines such that each line does not exceed the text_width`:</code></pre> <pre><code class="julia hljs"><span class=hljs-keyword >function</span> wrap_string(text::<span class=hljs-built_in >String</span>, text_width::<span class=hljs-built_in >Int</span>=<span class=hljs-number >10</span>)
     words = split(text)
     wrapped_text = <span class=hljs-string >&quot;&quot;</span>
     current_line_length = <span class=hljs-number >0</span>

     <span class=hljs-keyword >for</span> word <span class=hljs-keyword >in</span> words
         <span class=hljs-keyword >if</span> current_line_length + length(word) &lt;= text_width
             wrapped_text *= (current_line_length == <span class=hljs-number >0</span> ? <span class=hljs-string >&quot;&quot;</span> :  <span class=hljs-string >&quot; &quot;</span>) * word
             current_line_length += length(word) + current_line_length == <span class=hljs-number >0</span> ? <span class=hljs-number >0</span> : <span class=hljs-number >1</span>
         <span class=hljs-keyword >else</span>
             wrapped_text *= <span class=hljs-string >&quot;\n&quot;</span> * word
             current_line_length = length(word)
         <span class=hljs-keyword >end</span>
     <span class=hljs-keyword >end</span>

     <span class=hljs-keyword >return</span> wrapped_text
<span class=hljs-keyword >end</span></code></pre> <pre><code class="plaintext hljs">Example usage of the function:</code></pre>
<pre><code class="julia hljs">text = <span class=hljs-string >&quot;This function will wrap words into lines&quot;</span>
 wrapped_text = wrap_string(text)
 println(wrapped_text)</code></pre>
<pre><code class="plaintext hljs">This will output the text wrapped to the specified width as per the function. Due to the 10-character limit, you could expect the output to be in several lines, with each line&#x27;s length up to or a bit less than 10 characters, depending on the words&#x27; lengths and the spaces between them.&quot;)</code></pre>
<p>Pretty good for a single shot&#33; It took ~40 seconds to write, a few more seconds to generate and cost only a cent&#33;</p>
<p>We tried the example and all works as expected:</p>
<pre><code class="julia hljs">text = <span class=hljs-string >&quot;This function will wrap words into lines&quot;</span>
 wrapped_text = wrap_string(text)
<span class=hljs-comment ># &quot;This\nfunction\nwill wrap\nwords into\nlines&quot;</span></code></pre>
<p>Let&#39;s use it for our chart &#40;see the code in the appendix. Algebra of Graphics is amazing&#33;&#33;&#33;&#41;:</p>
<p><img src="/assets/genai_mini_tasks_plotting_helpers/barplot_legend_fixed.png" alt="Barplot with a fixed legend" /></p>
<h2 id=pro_tips ><a href="#pro_tips" class=header-anchor >Pro Tips</a></h2>
<p>Be explicit in what you want &#40;&quot;iterate over words&quot;&#41; and ask for examples &#40;&quot;provide an example&quot;&#41;. This allows you to quickly copy and paste the code and test it.</p>
<h2 id=conclusion ><a href="#conclusion" class=header-anchor >Conclusion</a></h2>
<p>GenAI Mini-Tasks show that even the most mundane coding tasks can be streamlined with AI. Embrace these tools to focus on what truly matters in your data science projects. Stay tuned for more insights on using GenAI to tackle everyday coding challenges&#33;</p>
<h2 id=appendix ><a href="#appendix" class=header-anchor >Appendix</a></h2>
<p>Code used to produce the examples above:</p>
<pre><code class="julia hljs"><span class=hljs-keyword >using</span> DataFramesMeta
<span class=hljs-keyword >using</span> CairoMakie, AlgebraOfGraphics

<span class=hljs-comment ># Example data for barplot with 2 stacked series</span>
dummy = DataFrame(
    x = repeat([<span class=hljs-string >&quot;Year 1&quot;</span>, <span class=hljs-string >&quot;Year 2&quot;</span>], inner = <span class=hljs-number >3</span>),
    y = repeat([<span class=hljs-string >&quot;This is extremely long name for category A&quot;</span>, <span class=hljs-string >&quot;B&quot;</span>, <span class=hljs-string >&quot;C&quot;</span>], outer = <span class=hljs-number >2</span>),
    z = [<span class=hljs-number >1</span>, <span class=hljs-number >2</span>, <span class=hljs-number >3</span>, <span class=hljs-number >4</span>, <span class=hljs-number >5</span>, <span class=hljs-number >6</span>],
)

<span class=hljs-comment ># Plot with AoG</span>
plt =
    data(dummy) *
    mapping(:x =&gt; <span class=hljs-string >&quot;Years&quot;</span>, :z =&gt; <span class=hljs-string >&quot;Values&quot;</span>, color = :y =&gt; <span class=hljs-string >&quot;Category&quot;</span>, stack = :y) *
    visual(BarPlot) |&gt; draw
save(<span class=hljs-string >&quot;barplot_legend_long.png&quot;</span>, plt, px_per_unit = <span class=hljs-number >2</span>)


<span class=hljs-string >&quot;Wraps a string to a given width by inserting newlines.&quot;</span>
<span class=hljs-keyword >function</span> wrap_string(text::<span class=hljs-built_in >String</span>, text_width::<span class=hljs-built_in >Int</span> = <span class=hljs-number >10</span>)
    words = split(text)
    wrapped_text = <span class=hljs-string >&quot;&quot;</span>
    current_line_length = <span class=hljs-number >0</span>

    <span class=hljs-keyword >for</span> word <span class=hljs-keyword >in</span> words
        <span class=hljs-keyword >if</span> current_line_length + length(word) &lt;= text_width
            wrapped_text *= (current_line_length == <span class=hljs-number >0</span> ? <span class=hljs-string >&quot;&quot;</span> : <span class=hljs-string >&quot; &quot;</span>) * word
            current_line_length += length(word) + (current_line_length == <span class=hljs-number >0</span> ? <span class=hljs-number >0</span> : <span class=hljs-number >1</span>)
        <span class=hljs-keyword >else</span>
            wrapped_text *= <span class=hljs-string >&quot;\n&quot;</span> * word
            current_line_length = length(word)
        <span class=hljs-keyword >end</span>
    <span class=hljs-keyword >end</span>

    <span class=hljs-keyword >return</span> wrapped_text
<span class=hljs-keyword >end</span>

<span class=hljs-comment ># Plot with AoG and wrapped labels (using the function above)</span>
plt =
    data(dummy) *
    mapping(
        :x =&gt; <span class=hljs-string >&quot;Years&quot;</span>,
        :z =&gt; <span class=hljs-string >&quot;Values&quot;</span>,
        color = :y =&gt; (x -&gt; wrap_string(x, <span class=hljs-number >20</span>)) =&gt; <span class=hljs-string >&quot;Category&quot;</span>,
        stack = :y,
    ) *
    visual(BarPlot) |&gt; draw
save(<span class=hljs-string >&quot;barplot_legend_fixed.png&quot;</span>, plt, px_per_unit = <span class=hljs-number >2</span>)</code></pre>
<div class=page-foot >
    <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> Jan Siml. Last modified: November 25, 2024.
    Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
</div>
</div></div> 

<footer class=container >
  <p class=float-end ><a href="#">Back to top</a></p>
  <div class=footer-icons >
      <ul class=social-icons >
          <li><strong>Follow:</strong>
          <li><a href="https://github.com/svilupp" rel="nofollow noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width=16  height=16  fill=currentColor  class="bi bi-github" viewBox="0 0 16 16">
              <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
            </svg> GitHub</a>
      </ul>
  </div>
  <p class=copyright >&copy; 2023- Company, Inc. · <a href="#">Privacy</a> · <a href="#">Terms</a></p>
</footer>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity=sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm  crossorigin=anonymous ></script>


  <script src="/libs/highlight/highlight.min.js"></script>
<script>hljs.highlightAll();hljs.configure({tabReplace: '    '});</script>


<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>