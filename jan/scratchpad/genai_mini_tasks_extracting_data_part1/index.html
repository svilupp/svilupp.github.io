<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/highlight/styles/github.min.css"> <!-- bootstrap@5.3.1 and bootstrap icon@1.10--> <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel=stylesheet  integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin=anonymous > <link rel=stylesheet  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"> <link rel=stylesheet  href="/css/style.css"> <link rel=stylesheet  href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"> <link data-n-head=ssr  rel=stylesheet  href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons"> <link rel=stylesheet  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin=anonymous  referrerpolicy=no-referrer  /> <link rel=stylesheet  href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==" crossorigin=anonymous  referrerpolicy=no-referrer  /> <!-- favicon generated through https://realfavicongenerator.net/--> <link rel=apple-touch-icon  sizes=180x180  href="/assets/icon/apple-touch-icon.png"> <link rel=icon  type="image/png" sizes=32x32  href="/assets/icon/favicon-32x32.png"> <link rel=icon  type="image/png" sizes=16x16  href="/assets/icon/favicon-16x16.png"> <link rel=manifest  href="/assets/icon/site.webmanifest"> <link rel=mask-icon  href="/assets/icon/safari-pinned-tab.svg" color="#5bbad5"> <meta name=msapplication-TileColor  content="#da532c"> <meta name=theme-color  content="#ffffff"> <link rel=stylesheet  href="/_css/custom.css"> <title>GenAI Mini-Tasks: Extracting Data from (.*)? Look No Further!</title> <header data-bs-theme=dark > <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark"> <div class=container > <a href="/" class="navbar-brand d-flex align-items-center"> <svg xmlns="http://www.w3.org/2000/svg" width=16  height=16  fill=currentColor  class="bi bi-journal-text me-2" viewBox="0 0 16 16"> <path d="M5 10.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"/> <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"/> <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"/> </svg> <strong>siml.earth</strong> </a> <button class=navbar-toggler  type=button  data-bs-toggle=collapse  data-bs-target="#navbarCollapse" aria-controls=navbarCollapse  aria-expanded=false  aria-label="Toggle navigation"> <span class=navbar-toggler-icon ></span> </button> <div class="collapse navbar-collapse" id=navbarCollapse > <ul class="navbar-nav me-auto mb-2 mb-md-0"> <li class="nav-item dropdown"> <a class="nav-link dropdown-toggle fw-bold" href="#" id=navbarDropdown  role=button  data-bs-toggle=dropdown  aria-expanded=false > Sites </a> <ul class=dropdown-menu  aria-labelledby=navbarDropdown > <li><h6 class=dropdown-header >Choose a Site</h6> <li><a class=dropdown-item  href="/jan/">Jan's Site</a> <li><a class=dropdown-item  href="/ann/">Ann's Site</a> </ul> <li class=nav-item ><hr class="dropdown-divider mx-2"> <li class=nav-item > <span class="navbar-text px-2 fw-bold d-flex align-items-center">Jan's:</span> <li class=nav-item > <a class=nav-link  aria-current=page  href="/jan/">Home</a> <li class=nav-item > <a class=nav-link  href="/jan/scratchpad/">Posts</a> <li class=nav-item > <a class=nav-link  href="/jan/wip/">Work in Progress</a> <li class=nav-item > <a class=nav-link  href="/jan/about/">About</a> <li class=nav-item > <a class=nav-link  href="/jan/tags/">Tags</a> <li class=nav-item > <a class=nav-link  href="/jan/privacy_policy/">Privacy Policy</a> <li class=nav-item > <a class=nav-link  href="/jan/cookie_policy/">Cookie Policy</a> </ul> </div> </div> </nav> </header> <div class="container py-3 px-3 mx-auto"> <div class=franklin-content ><h1 id=tldr ><a href="#tldr" class=header-anchor >TL;DR</a></h1> <p><code>aiextract</code> in PromptingTools.jl is a game-changer for data analysts, offering a quick and efficient way to extract structured data from various text sources, making tedious data extraction tasks a breeze while ensuring security in AI applications.</p> <p><div class=franklin-toc ><ol><li><a href="#tldr">TL;DR</a><ol><li><a href="#say_goodbye_to_tedious_data_extraction">Say Goodbye to Tedious Data Extraction&#33;</a><li><a href="#example_1_the_contact_information_from_a_conference">Example 1: The Contact Information from a Conference</a><li><a href="#example_2_measurements_in_different_units">Example 2: Measurements in Different Units</a><li><a href="#llm_security_the_risk_of_prompt_injection">LLM Security: The Risk of Prompt Injection</a><li><a href="#wrap-up_embrace_the_future_of_data_extraction">Wrap-Up: Embrace the Future of Data Extraction</a></ol></ol></div> </p> <h2 id=say_goodbye_to_tedious_data_extraction ><a href="#say_goodbye_to_tedious_data_extraction" class=header-anchor >Say Goodbye to Tedious Data Extraction&#33;</a></h2> <p>As a data analyst, you&#39;re no stranger to the Herculean task of sifting through heaps of documents, emails, and web pages to find those few precious nuggets of information. It&#39;s like finding a needle in a haystack, right? But what if I told you that there&#39;s a magic wand in the Julia universe that can turn this tedious task into a piece of cake? Enter <code>aiextract</code> from PromptingTools.jl and say goodbye to the old days of wrestling with complex regex patterns&#33;</p> <h2 id=example_1_the_contact_information_from_a_conference ><a href="#example_1_the_contact_information_from_a_conference" class=header-anchor >Example 1: The Contact Information from a Conference</a></h2> <p>Picture this: You have a blob of notes from a conference mentioning several contacts from different companies that you met and you want to ping them. Traditional methods would have you manually searching each name, company, and contact detail and using some crazy Regex rules. But with <code>aiextract</code>, it&#39;s a breeze&#33; </p> <p>We want to extract the name, company &#40;optional&#41;, and email &#40;optional&#41; of the people we met. Let&#39;s see how we can do this with <code>aiextract</code>:</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> PromptingTools
<span class=hljs-keyword >const</span> PT = PromptingTools

<span class=hljs-comment ># Extract name, company (optional), email (optional)</span>
<span class=hljs-keyword >struct</span> ContactInfo
    name::<span class=hljs-built_in >String</span>
    company::<span class=hljs-built_in >Union</span>{<span class=hljs-built_in >Nothing</span>,<span class=hljs-built_in >String</span>}
    email::<span class=hljs-built_in >Union</span>{<span class=hljs-built_in >Nothing</span>,<span class=hljs-built_in >String</span>}
<span class=hljs-keyword >end</span>

<span class=hljs-comment ># Our meeting notes </span>
str1 = <span class=hljs-string >&quot;James, sales rep in Apple, likes to drink tea. He even has an email teadrinker@apple.com. That is still less crazy than crazy.jane@samsung.com. That’s what Jane had on her business card - I couldn’t believe my eyes. You should probably just call her phone instead.&quot;</span>

<span class=hljs-comment ># Let&#x27;s pick some &quot;detail-oriented&quot; template (optional)</span>
<span class=hljs-comment ># aitemplates(&quot;Detail&quot;) </span>

<span class=hljs-comment ># we use template :DetailOrientedTask with placeholders task, data. </span>
<span class=hljs-comment ># return_type is for the custom struct we defined above</span>
msg = aiextract(:DetailOrientedTask; task=<span class=hljs-string >&quot;Extract ContactInfo for processing.&quot;</span>, data=str1, return_type=ContactInfo)
msg.content</code></pre> <pre><code class="plaintext hljs">[ Info: Tokens: 187 @ Cost: \$0.0003 in 2.0 seconds
PromptingTools.DataMessage(ContactInfo)

ContactInfo(&quot;James&quot;, &quot;Apple&quot;, &quot;teadrinker@apple.com&quot;)</code></pre> <p>Great&#33; A few seconds later we have one contact extracted. But what if we want to have all contacts extracted at once? No problem&#33; Just define another struct <code>ManyContactInfo</code> that holds a vector of <code>ContactInfo</code>:</p> <pre><code class="julia hljs"><span class=hljs-keyword >struct</span> ManyContactInfo
    contacts::<span class=hljs-built_in >Vector</span>{ContactInfo}
<span class=hljs-keyword >end</span>

msg = aiextract(:DetailOrientedTask; task=<span class=hljs-string >&quot;Extract all ContactInfo for processing.&quot;</span>, data=str1, return_type=ManyContactInfo)

msg.content</code></pre> <pre><code class="plaintext hljs">[ Info: Tokens: 248 @ Cost: \$0.0004 in 2.8 seconds
PromptingTools.DataMessage(ManyContactInfo)

ManyContactInfo(ContactInfo[ContactInfo(&quot;James&quot;, &quot;Apple&quot;, &quot;teadrinker@apple.com&quot;), ContactInfo(&quot;Jane&quot;, &quot;Samsung&quot;, &quot;crazy.jane@samsung.com&quot;)])</code></pre> <p>Just a few lines of code, and voilà&#33; You have the names, companies, and optional contact details neatly extracted.</p> <p>Note that we&#39;re using the simplest OpenAI model &#40;GPT 3.5 Turbo&#41;, so there is potential to improve for harder tasks.</p> <h2 id=example_2_measurements_in_different_units ><a href="#example_2_measurements_in_different_units" class=header-anchor >Example 2: Measurements in Different Units</a></h2> <p>Another scenario: You need to extract ages and weights from a narrative, but the weights are in different units &#40;pounds, kilograms&#41;. With Julia Enums &#40;see <code>?@enum</code>&#41;, handling these variations is as easy as pie.</p> <pre><code class="julia hljs"><span class=hljs-comment ># Our little story</span>
str2 = <span class=hljs-string >&quot;&quot;&quot;
With 80kg, Joe is a pretty average size. No wonder, he is still too young, having celebrated his 18th birthday last year. 
He always loses in wrestling to Sarah who is much older and heavier. I think she’s around 250 pounds. 
Joe went to her 30th birthday earlier this year.
&quot;&quot;&quot;</span>

<span class=hljs-comment ># Define a special variable WeightUnits that can have only 2 options</span>
<span class=hljs-meta >@enum</span> WeightUnits Pounds Kilograms

<span class=hljs-keyword >struct</span> BioMeasurement
    name::<span class=hljs-built_in >String</span>
    age::<span class=hljs-built_in >Union</span>{<span class=hljs-built_in >Nothing</span>,<span class=hljs-built_in >Int</span>}
    weight::<span class=hljs-built_in >Union</span>{<span class=hljs-built_in >Nothing</span>,<span class=hljs-built_in >Int</span>}
    weight_units::<span class=hljs-built_in >Union</span>{<span class=hljs-built_in >Nothing</span>,WeightUnits}
<span class=hljs-keyword >end</span>

<span class=hljs-keyword >struct</span> ManyBioMeasurement
    measurements::<span class=hljs-built_in >Vector</span>{BioMeasurement}
<span class=hljs-keyword >end</span>

msg = aiextract(:DetailOrientedTask; task=<span class=hljs-string >&quot;Extract biomeasurements&quot;</span>, data=str2, return_type=ManyBioMeasurement)
msg.content</code></pre> <pre><code class="plaintext hljs">[ Info: Tokens: 265 @ Cost: \$0.0004 in 2.5 seconds
PromptingTools.DataMessage(ManyBioMeasurement)

ManyBioMeasurement(BioMeasurement[BioMeasurement(&quot;Joe&quot;, 18, 80, Kilograms), BioMeasurement(&quot;Sarah&quot;, 30, 250, Pounds)])</code></pre> <p>Works like a charm&#33; Except for the age of Joe who celebrated his 18th birthday last year, so he is likely 19 years at this point. We could probably improve the instructions, but let&#39;s try a better model first &#40;&quot;gpt4t&quot; is alias for GPT-4 Turbo&#41;:</p> <pre><code class="julia hljs"><span class=hljs-comment ># we added model=&quot;gpt4t&quot; to use a better model</span>
msg = aiextract(:DetailOrientedTask; task=<span class=hljs-string >&quot;Extract biomeasurements&quot;</span>, data=str2, return_type=ManyBioMeasurement, model=<span class=hljs-string >&quot;gpt4t&quot;</span>)</code></pre> <pre><code class="plaintext hljs">[ Info: Tokens: 262 @ Cost: \$0.0042 in 3.5 seconds
PromptingTools.DataMessage(ManyBioMeasurement)

ManyBioMeasurement(BioMeasurement[BioMeasurement(&quot;Joe&quot;, 19, 80, Kilograms), BioMeasurement(&quot;Sarah&quot;, 30, 250, Pounds)])</code></pre> <p>It worked&#33; We got Joe&#39;s age right and still paid less than half a cent.</p> <p>A few words of caution before you start extracting the whole internet.</p> <h2 id=llm_security_the_risk_of_prompt_injection ><a href="#llm_security_the_risk_of_prompt_injection" class=header-anchor >LLM Security: The Risk of Prompt Injection</a></h2> <p>When using any Language Model &#40;LLM&#41;, like in PromptingTools.jl, it&#39;s crucial to be aware of <strong>prompt injection</strong> risks, especially when scanning unknown data sources. For a more detailed introduction to prompt injections, check out <a href="https://www.redsentry.com/blog/what-is-prompt-injection">this article</a>.</p> <p>Prompt injection occurs when malicious content is embedded in the data being analyzed. This is particularly risky when your LLM accesses private information. For instance, while OpenAI&#39;s models present less risk, tools like Microsoft Copilot, which might access sensitive data, can be more vulnerable.</p> <p>Imagine using an extractor to find an email on a website, but stumbling upon a hidden, malicious prompt—like white text on a white background. This could hijack your LLM, leading it to output incorrect, potentially harmful information, or even compromise your private data.</p> <p>While these scenarios are not meant to scare you, they highlight the importance of being vigilant. Always consider the potential risks of running LLMs on data you don’t control, and assess whether these risks are acceptable for your project.</p> <h2 id=wrap-up_embrace_the_future_of_data_extraction ><a href="#wrap-up_embrace_the_future_of_data_extraction" class=header-anchor >Wrap-Up: Embrace the Future of Data Extraction</a></h2> <p>So, there you have it&#33; <code>aiextract</code> from PromptingTools.jl should become your go-to solution for small to medium data extraction jobs from any text source. It&#39;s fast, efficient, and, honestly, a bit magical. Dive into the world of <code>aiextract</code> and watch your productivity soar&#33; 🚀👩‍💻👨</p> <div class=page-foot > <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> Jan Siml. Last modified: November 27, 2024. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div></div> <footer class=container > <p class=float-end ><a href="#">Back to top</a></p> <div class=footer-icons > <ul class=social-icons > <li><strong>Follow:</strong> <li><a href="https://github.com/svilupp" rel="nofollow noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width=16  height=16  fill=currentColor  class="bi bi-github" viewBox="0 0 16 16"> <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/> </svg> GitHub</a> </ul> </div> <p class=copyright >&copy; 2023- Company, Inc. · <a href="#">Privacy</a> · <a href="#">Terms</a></p> </footer> <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity=sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm  crossorigin=anonymous ></script> <script src="/libs/highlight/highlight.min.js"></script> <script>hljs.highlightAll();hljs.configure({tabReplace: ' '});</script> <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>