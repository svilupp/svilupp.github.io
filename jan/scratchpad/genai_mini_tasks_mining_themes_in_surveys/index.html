<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/highlight/styles/github.min.css"> <!-- bootstrap@5.3.1 and bootstrap icon@1.10--> <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel=stylesheet  integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin=anonymous > <link rel=stylesheet  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"> <link rel=stylesheet  href="/css/style.css"> <link rel=stylesheet  href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"> <link data-n-head=ssr  rel=stylesheet  href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons"> <link rel=stylesheet  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin=anonymous  referrerpolicy=no-referrer  /> <link rel=stylesheet  href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==" crossorigin=anonymous  referrerpolicy=no-referrer  /> <!-- favicon generated through https://realfavicongenerator.net/--> <link rel=apple-touch-icon  sizes=180x180  href="/assets/icon/apple-touch-icon.png"> <link rel=icon  type="image/png" sizes=32x32  href="/assets/icon/favicon-32x32.png"> <link rel=icon  type="image/png" sizes=16x16  href="/assets/icon/favicon-16x16.png"> <link rel=manifest  href="/assets/icon/site.webmanifest"> <link rel=mask-icon  href="/assets/icon/safari-pinned-tab.svg" color="#5bbad5"> <meta name=msapplication-TileColor  content="#da532c"> <meta name=theme-color  content="#ffffff"> <link rel=stylesheet  href="/_css/custom.css"> <title>GenAI Mini-Tasks: Mining Themes in Survey Responses</title> <header data-bs-theme=dark > <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark"> <div class=container > <a href="/" class="navbar-brand d-flex align-items-center"> <svg xmlns="http://www.w3.org/2000/svg" width=16  height=16  fill=currentColor  class="bi bi-journal-text me-2" viewBox="0 0 16 16"> <path d="M5 10.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"/> <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"/> <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"/> </svg> <strong>siml.earth</strong> </a> <button class=navbar-toggler  type=button  data-bs-toggle=collapse  data-bs-target="#navbarCollapse" aria-controls=navbarCollapse  aria-expanded=false  aria-label="Toggle navigation"> <span class=navbar-toggler-icon ></span> </button> <div class="collapse navbar-collapse" id=navbarCollapse > <ul class="navbar-nav me-auto mb-2 mb-md-0"> <li class="nav-item dropdown"> <a class="nav-link dropdown-toggle fw-bold" href="#" id=navbarDropdown  role=button  data-bs-toggle=dropdown  aria-expanded=false > Sites </a> <ul class=dropdown-menu  aria-labelledby=navbarDropdown > <li><h6 class=dropdown-header >Choose a Site</h6> <li><a class=dropdown-item  href="/jan/">Jan's Site</a> <li><a class=dropdown-item  href="/ann/">Ann's Site</a> </ul> <li class=nav-item ><hr class="dropdown-divider mx-2"> <li class=nav-item > <span class="navbar-text px-2 fw-bold d-flex align-items-center">Jan's:</span> <li class=nav-item > <a class=nav-link  aria-current=page  href="/jan/">Home</a> <li class=nav-item > <a class=nav-link  href="/jan/scratchpad/">Posts</a> <li class=nav-item > <a class=nav-link  href="/jan/wip/">Work in Progress</a> <li class=nav-item > <a class=nav-link  href="/jan/about/">About</a> <li class=nav-item > <a class=nav-link  href="/jan/tags/">Tags</a> <li class=nav-item > <a class=nav-link  href="/jan/privacy_policy/">Privacy Policy</a> <li class=nav-item > <a class=nav-link  href="/jan/cookie_policy/">Cookie Policy</a> </ul> </div> </div> </nav> </header> <div class="container py-3 px-3 mx-auto"> <div class=franklin-content ><h1 id=tldr ><a href="#tldr" class=header-anchor >TL;DR</a></h1> <p>Using Generative AI and Julia&#39;s PromptingTools.jl, we efficiently extracted key themes from a large set of survey responses in the Austin Community Survey, demonstrating how GenAI can save significant time and enhance data analysis efficiency.</p> <p><div class=franklin-toc ><ol><li><a href="#tldr">TL;DR</a><ol><li><a href="#introduction">Introduction</a><li><a href="#example_mining_themes">Example: Mining Themes</a><li><a href="#customizing_your_analysis">Customizing Your Analysis</a><li><a href="#privacy_considerations">Privacy Considerations</a><li><a href="#conclusion">Conclusion</a></ol></ol></div> </p> <h2 id=introduction ><a href="#introduction" class=header-anchor >Introduction</a></h2> <p>Welcome to our GenAI Mini-Tasks series&#33; Today, we&#39;re diving into how Generative AI can transform the way we analyze survey data, using a real-life example from the Austin Community Survey &#40;source: <a href="https://data.austintexas.gov/dataset/Community-Survey/s2py-ceb7/data">Austin Community Survey Data</a>&#41;.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> DataFramesMeta, CSV
<span class=hljs-keyword >using</span> PromptingTools
<span class=hljs-keyword >const</span> PT = PromptingTools

<span class=hljs-comment >## Survey Austin</span>
df_survey = CSV.File(<span class=hljs-string >&quot;Community_Survey_cItyofaustin.csv&quot;</span>) |&gt; DataFrame
last(names(df_survey), <span class=hljs-number >10</span>)</code></pre> <pre><code class="plaintext hljs">10-element Vector{String}:
 &quot;Q25 - If there was one thing yo&quot; ⋯ 77 bytes ⋯ &quot;stion, etc.), what would it be?&quot;
 &quot;Q25 - One thing to share with Mayor Topics&quot;
 &quot;Quality of Life Topics&quot;
 &quot;Economic Opportunity and Affordability Topics&quot;
 &quot;Mobility Topics&quot;
 &quot;Health and the Environment Topics&quot;
 &quot;Safety Topics&quot;
 &quot;Government That Works for All Topics&quot;
 &quot;Culture and Lifelong Learning Topics&quot;
 &quot;Share with the Mayor Topics&quot;</code></pre> <p>Messy column names, huh? Check out our previous tutorial on how to clean up column names with GenAI: <a href="https://svilupp.github.io/scratchpad/genai_mini_tasks_wild_columns_part1/">GenAI Mini-Tasks: Taming Wild Table Columns Part1</a>.</p> <h2 id=example_mining_themes ><a href="#example_mining_themes" class=header-anchor >Example: Mining Themes</a></h2> <p>Our goal: extracting key themes from verbatim responses to the question &quot;Q25 - If there was one thing you could share with the Mayor regarding the City of Austin &#40;any comment, suggestion, etc.&#41;, what would it be?&quot;. With a mountain of responses &#40;almost 2,000&#41;, manually sifting through them is daunting. That&#39;s where GenAI comes in&#33;</p> <p>Using PromptingTools.jl and a template <code>:AnalystThemesInResponses</code>, we get insightful themes extracted within 2 minutes, not hours&#33;</p> <pre><code class="julia hljs">col = <span class=hljs-string >&quot;Q25 - If there was one thing you could share with the Mayor regarding the City of Austin (any comment, suggestion, etc.), what would it be?&quot;</span>
responses = <span class=hljs-meta >@chain</span> df_survey <span class=hljs-keyword >begin</span>
    <span class=hljs-meta >@rsubset</span> :Year == <span class=hljs-number >2018</span>
    dropmissing(col)
    _[:, col]
<span class=hljs-keyword >end</span>

<span class=hljs-comment ># Check available templates (optional as a reminder)</span>
<span class=hljs-comment ># aitemplates(&quot;Themes&quot;)</span>

<span class=hljs-comment ># Let&#x27;s take a subset of 100 </span>
sample_responses = last(responses, <span class=hljs-number >100</span>)
msg = aigenerate(:AnalystThemesInResponses; question=col, responses=sample_responses, instructions=<span class=hljs-string >&quot;None.&quot;</span>)</code></pre> <p>Voila&#33;</p> <pre><code class="plaintext hljs">[ Info: Tokens: 3785 @ Cost: \$0.0058 in 7.7 seconds
AIMessage(&quot;# Theme 1: Traffic and Transportation Improvement
- Best illustrated by: &quot;Traffic is the main concern and needs to be addressed. Buses cause a major backup, they need to be allowed to pull over without backing up traffic even if the sidewalk needs to be pushed back in order to accommodate this, then it should be done. Many other cities do this.&quot;
- This theme is focused on the issues of traffic congestion, buses causing backups, and the need for improvement in transportation infrastructure.

# Theme 2: Affordable Housing
- Best illustrated by: &quot;More affordable housing or part of Austin primary Black and Hispanic will disappear.&quot;
- This theme highlights the need for more affordable housing options in Austin to prevent displacement and maintain the diversity of the community.

# Theme 3: Homelessness and Public Safety
- Best illustrated by: &quot;We have to do something about the homeless population. The homeless are downtown, under freeway passes, living in camps in the greenbelt, panhandling on every corner, all over UT Campus. Many seem to be on drugs and are unstable and aggressive. I don&#x27;t feel safe at night walking downtown alone.&quot;
- This theme addresses concerns about the homeless population, including safety issues and the need for proper support and intervention strategies.&quot;)</code></pre> <p>For a nicer display, I would recommend using Julia Markdown:</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> Markdown
msg.content |&gt; Markdown.parse</code></pre> <h2 id=customizing_your_analysis ><a href="#customizing_your_analysis" class=header-anchor >Customizing Your Analysis</a></h2> <p>Did you notice the keyword argument <code>Instructions&#61;&quot;None.&quot;</code> we used? That’s a placeholder for when you want to deviate from the default instructions in the template.</p> <p>Note: we can also use better models &#40;like GPT-4 Turbo aliased as &quot;gpt4t&quot;&#41; to get better responses. In addition, GPT-4 Turbo has 128K context window, so we can easily send all verbatims without any chunking.</p> <pre><code class="julia hljs">aigenerate(:AnalystThemesInResponses; question=col, responses=sample_responses, instructions=<span class=hljs-string >&quot;Identify 10 themes. Focus on Green/Sustainability topics.&quot;</span>, model=<span class=hljs-string >&quot;gpt4t&quot;</span>)</code></pre>
<pre><code class="plaintext hljs">[ Info: Tokens: 4137 @ Cost: \$0.0532 in 34.2 seconds
AIMessage(&quot;
# Theme 1: Infrastructure and Traffic Management
- Best illustrated by: &quot;Traffic is the main concern and needs to be addressed. Buses cause a major backup, they need to be allowed to pull over without backing up traffic even if the sidewalk needs to be pushed back in order to accommodate this, then it should be done. Many other cities do this.&quot;

# Theme 2: Public Transportation Improvements
- Best illustrated by: &quot;WE NEED BETTER TRANSPORTATION. A LIGHT RAIL WOULD BE NICE.&quot;

# Theme 3: Affordable Housing and Cost of Living
- Best illustrated by: &quot;More affordable housing or part of Austin primary Black and Hispanic will disappear.&quot;

# Theme 4: Homelessness and Support Services
- Best illustrated by: &quot;We have to do something about the homeless population. The homeless are downtown, under freeway passes, living in camps in the greenbelt, panhandling on every corner, all over UT Campus. Many seem to be on drugs and are unstable and aggressive. I don&#x27;t feel safe at night walking downtown alone.&quot;

# Theme 5: Environmental Sustainability and Clean Energy
- Best illustrated by: &quot;IMPROVE PUBLIC TRANSPORTATION AND A BIGGER PUSH FOR GREEN ENERGY AND GENERAL SERVICES&quot;

# Theme 6: Traffic and Non-Automotive Transportation Safety
- Best illustrated by: &quot;Please keep bicycles off roads that are too narrow and have no bike lanes. Impress upon bicycle riders that they are REQUIRED to follow the same laws as cars if they are driving in the street lanes - NO RUNNING RED LIGHTS. If bicycle riders don&#x27;t want cars to be rude to them, they need to ride appropriately.&quot;

# Theme 7: Green Spaces and Parks
- Best illustrated by: &quot;I would like to have a city park near my home with a walking trail. Poor neighborhoods rarely have a park nearby.&quot;

# Theme 8: Utilities and Energy
- Best illustrated by: &quot;The electric bill is too high, even with assistance program.&quot;

# Theme 9: Environmental Health and Safety
- Best illustrated by: &quot;Sanction those who blow leaves and trimmings into the street. Create ways to accelerate traffic flow on Lamar and Airport interception.&quot;

# Theme 10: Pollution Control and Waste Management
- Best illustrated by: &quot;THERE ARE MANY CRAZY PEOPLE WHO WANT FLUORIDE OUT OF THE DRINKING WATER HERE, PLEASE SEE PAST THE CRAZY AND REALIZE THERE ARE RATIONAL, LOGICAL AND FISCAL REASONS TO REMOVE FLUORIDE FROM THE WATER, IT IS REMOVED PEOPLE CAN STILL OPT-IN AND THE CITY CAN GET THEM FLUORIDE IN ANOTHER WAYS BUT IF IT REMAINS IN IT IS FORCED ON EVERYONE EVEN THOSE WHO DON&#x27;T WANT IT AND THOSE WITH MEDICAL CONDITION FLUOROSIS REMOVE FLUORIDE ITS A WASTE OF MONEY&quot;
&quot;)</code></pre>
<p>This way you can slice and dice your data in many ways, and GenAI will adapt to your needs.</p>
<h2 id=privacy_considerations ><a href="#privacy_considerations" class=header-anchor >Privacy Considerations</a></h2>
<p>First, OpenAI API does not use your training for training and it only retains for a short period of time to check for violations &#40;<a href="https://platform.openai.com/docs/models/how-we-use-your-data">link</a>&#41;.</p>
<p>Second, you can use a few utilities we provide to scrub specific named entities &#40;see <code>?PT.replace_words</code>&#41;.</p>
<p>Third, PromptingTools.jl supports Ollama models, so you can switch over to local models without any changes to your code and your data never leaves your computer. If you need something quick and small, consider <code>openhermes2.5-mistral</code> or <code>zephyr</code>. If you have Apple M1 or Nvidia GPU, you can use something bigger like <code>yi:34b-chat</code>.</p>
<h2 id=conclusion ><a href="#conclusion" class=header-anchor >Conclusion</a></h2>
<p>By leveraging GenAI, we&#39;ve saved countless hours and gained a clear view of community opinions. This approach isn&#39;t just a time-saver; it&#39;s a game-changer in making data analysis more accessible and efficient. Join us next time for more GenAI-powered data solutions&#33;</p>
<p>Note: It does not mean that you should stop reading the verbatims completely&#33; GenAI helps you to get different perspectives very quickly to grasp the main themes and you can then follow up with more specific prompts/questions - or ask to receive only some specific verbatims &#40;eg, &quot;which verbatims mention emissions?&quot;&#41;</p>
<div class=page-foot >
    <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> Jan Siml. Last modified: November 17, 2024.
    Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
</div>
</div></div> 

<footer class=container >
  <p class=float-end ><a href="#">Back to top</a></p>
  <div class=footer-icons >
      <ul class=social-icons >
          <li><strong>Follow:</strong>
          <li><a href="https://github.com/svilupp" rel="nofollow noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width=16  height=16  fill=currentColor  class="bi bi-github" viewBox="0 0 16 16">
              <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
            </svg> GitHub</a>
      </ul>
  </div>
  <p class=copyright >&copy; 2023- Company, Inc. · <a href="#">Privacy</a> · <a href="#">Terms</a></p>
</footer>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity=sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm  crossorigin=anonymous ></script>


  <script src="/libs/highlight/highlight.min.js"></script>
<script>hljs.highlightAll();hljs.configure({tabReplace: '    '});</script>


<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>