<!doctype html> <html lang=en > <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-M28VNQP');</script> <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/highlight/styles/github.min.css"> <link href="/css/franklin.css" rel=stylesheet > <link href="/css/vela.css" rel=stylesheet > <script src="/libs/vela/jquery.min.js"></script> <link rel=icon  href="/assets/favicon.png"> <title>Jan's Scratchpad</title> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M28VNQP" height=0  width=0  style="display:none;visibility:hidden"></iframe></noscript> <div class="main-nav slideout-menu slideout-menu-left" id=menu > <div class=flex-container > <span class=sidebar-brand > <h3 style='font-size: 25px'>Scratchpad</h3> </span> </div> <nav class=sidebar-nav > <ul class=metismenu  id=metismenu  > <li><a href="/index.html">Home</a> <li><a href="/scratchpad/">Posts</a> <li><a href="/about/">About</a> <li><a href="/tag/">Tags</a> <li><a href="/privacy_policy/">Privacy Policy</a> <li><a href="/cookie_policy/">Cookie Policy</a> </ul> </nav> </div> <main id=panel  class="slidout-panel slideout-panel-left"> <div class="toggle-button hamburger hamburger--spin"> <div class=hamburger-box > <div class=hamburger-inner ></div> </div> </div> <h1 class="page title">GenAI Mini-Tasks: Extracting Data from (.*)? Look No Further!</h1> <hr> <div class=franklin-content ><h1 id=tldr ><a href="#tldr" class=header-anchor >TL;DR</a></h1> <p><code>aiextract</code> in PromptingTools.jl is a game-changer for data analysts, offering a quick and efficient way to extract structured data from various text sources, making tedious data extraction tasks a breeze while ensuring security in AI applications.</p> <p><div class=franklin-toc ><ol><li><a href="#say_goodbye_to_tedious_data_extraction">Say Goodbye to Tedious Data Extraction&#33;</a><li><a href="#example_1_the_contact_information_from_a_conference">Example 1: The Contact Information from a Conference</a><li><a href="#example_2_measurements_in_different_units">Example 2: Measurements in Different Units</a><li><a href="#llm_security_the_risk_of_prompt_injection">LLM Security: The Risk of Prompt Injection</a><li><a href="#wrap-up_embrace_the_future_of_data_extraction">Wrap-Up: Embrace the Future of Data Extraction</a></ol></div> </p> <h2 id=say_goodbye_to_tedious_data_extraction ><a href="#say_goodbye_to_tedious_data_extraction" class=header-anchor >Say Goodbye to Tedious Data Extraction&#33;</a></h2> <p>As a data analyst, you&#39;re no stranger to the Herculean task of sifting through heaps of documents, emails, and web pages to find those few precious nuggets of information. It&#39;s like finding a needle in a haystack, right? But what if I told you that there&#39;s a magic wand in the Julia universe that can turn this tedious task into a piece of cake? Enter <code>aiextract</code> from PromptingTools.jl and say goodbye to the old days of wrestling with complex regex patterns&#33;</p> <h2 id=example_1_the_contact_information_from_a_conference ><a href="#example_1_the_contact_information_from_a_conference" class=header-anchor >Example 1: The Contact Information from a Conference</a></h2> <p>Picture this: You have a blob of notes from a conference mentioning several contacts from different companies that you met and you want to ping them. Traditional methods would have you manually searching each name, company, and contact detail and using some crazy Regex rules. But with <code>aiextract</code>, it&#39;s a breeze&#33; </p> <p>We want to extract the name, company &#40;optional&#41;, and email &#40;optional&#41; of the people we met. Let&#39;s see how we can do this with <code>aiextract</code>:</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> PromptingTools
<span class=hljs-keyword >const</span> PT = PromptingTools

<span class=hljs-comment ># Extract name, company (optional), email (optional)</span>
<span class=hljs-keyword >struct</span> ContactInfo
    name::<span class=hljs-built_in >String</span>
    company::<span class=hljs-built_in >Union</span>{<span class=hljs-built_in >Nothing</span>,<span class=hljs-built_in >String</span>}
    email::<span class=hljs-built_in >Union</span>{<span class=hljs-built_in >Nothing</span>,<span class=hljs-built_in >String</span>}
<span class=hljs-keyword >end</span>

<span class=hljs-comment ># Our meeting notes </span>
str1 = <span class=hljs-string >&quot;James, sales rep in Apple, likes to drink tea. He even has an email teadrinker@apple.com. That is still less crazy than crazy.jane@samsung.com. That’s what Jane had on her business card - I couldn’t believe my eyes. You should probably just call her phone instead.&quot;</span>

<span class=hljs-comment ># Let&#x27;s pick some &quot;detail-oriented&quot; template (optional)</span>
<span class=hljs-comment ># aitemplates(&quot;Detail&quot;) </span>

<span class=hljs-comment ># we use template :DetailOrientedTask with placeholders task, data. </span>
<span class=hljs-comment ># return_type is for the custom struct we defined above</span>
msg = aiextract(:DetailOrientedTask; task=<span class=hljs-string >&quot;Extract ContactInfo for processing.&quot;</span>, data=str1, return_type=ContactInfo)
msg.content</code></pre> <pre><code class="plaintext hljs">[ Info: Tokens: 187 @ Cost: \$0.0003 in 2.0 seconds
PromptingTools.DataMessage(ContactInfo)

ContactInfo(&quot;James&quot;, &quot;Apple&quot;, &quot;teadrinker@apple.com&quot;)</code></pre> <p>Great&#33; A few seconds later we have one contact extracted. But what if we want to have all contacts extracted at once? No problem&#33; Just define another struct <code>ManyContactInfo</code> that holds a vector of <code>ContactInfo</code>:</p> <pre><code class="julia hljs"><span class=hljs-keyword >struct</span> ManyContactInfo
    contacts::<span class=hljs-built_in >Vector</span>{ContactInfo}
<span class=hljs-keyword >end</span>

msg = aiextract(:DetailOrientedTask; task=<span class=hljs-string >&quot;Extract all ContactInfo for processing.&quot;</span>, data=str1, return_type=ManyContactInfo)

msg.content</code></pre> <pre><code class="plaintext hljs">[ Info: Tokens: 248 @ Cost: \$0.0004 in 2.8 seconds
PromptingTools.DataMessage(ManyContactInfo)

ManyContactInfo(ContactInfo[ContactInfo(&quot;James&quot;, &quot;Apple&quot;, &quot;teadrinker@apple.com&quot;), ContactInfo(&quot;Jane&quot;, &quot;Samsung&quot;, &quot;crazy.jane@samsung.com&quot;)])</code></pre> <p>Just a few lines of code, and voilà&#33; You have the names, companies, and optional contact details neatly extracted.</p> <p>Note that we&#39;re using the simplest OpenAI model &#40;GPT 3.5 Turbo&#41;, so there is potential to improve for harder tasks.</p> <h2 id=example_2_measurements_in_different_units ><a href="#example_2_measurements_in_different_units" class=header-anchor >Example 2: Measurements in Different Units</a></h2> <p>Another scenario: You need to extract ages and weights from a narrative, but the weights are in different units &#40;pounds, kilograms&#41;. With Julia Enums &#40;see <code>?@enum</code>&#41;, handling these variations is as easy as pie.</p> <pre><code class="julia hljs"><span class=hljs-comment ># Our little story</span>
str2 = <span class=hljs-string >&quot;&quot;&quot;
With 80kg, Joe is a pretty average size. No wonder, he is still too young, having celebrated his 18th birthday last year. 
He always loses in wrestling to Sarah who is much older and heavier. I think she’s around 250 pounds. 
Joe went to her 30th birthday earlier this year.
&quot;&quot;&quot;</span>

<span class=hljs-comment ># Define a special variable WeightUnits that can have only 2 options</span>
<span class=hljs-meta >@enum</span> WeightUnits Pounds Kilograms

<span class=hljs-keyword >struct</span> BioMeasurement
    name::<span class=hljs-built_in >String</span>
    age::<span class=hljs-built_in >Union</span>{<span class=hljs-built_in >Nothing</span>,<span class=hljs-built_in >Int</span>}
    weight::<span class=hljs-built_in >Union</span>{<span class=hljs-built_in >Nothing</span>,<span class=hljs-built_in >Int</span>}
    weight_units::<span class=hljs-built_in >Union</span>{<span class=hljs-built_in >Nothing</span>,WeightUnits}
<span class=hljs-keyword >end</span>

<span class=hljs-keyword >struct</span> ManyBioMeasurement
    measurements::<span class=hljs-built_in >Vector</span>{BioMeasurement}
<span class=hljs-keyword >end</span>

msg = aiextract(:DetailOrientedTask; task=<span class=hljs-string >&quot;Extract biomeasurements&quot;</span>, data=str2, return_type=ManyBioMeasurement)
msg.content</code></pre> <pre><code class="plaintext hljs">[ Info: Tokens: 265 @ Cost: \$0.0004 in 2.5 seconds
PromptingTools.DataMessage(ManyBioMeasurement)

ManyBioMeasurement(BioMeasurement[BioMeasurement(&quot;Joe&quot;, 18, 80, Kilograms), BioMeasurement(&quot;Sarah&quot;, 30, 250, Pounds)])</code></pre> <p>Works like a charm&#33; Except for the age of Joe who celebrated his 18th birthday last year, so he is likely 19 years at this point. We could probably improve the instructions, but let&#39;s try a better model first &#40;&quot;gpt4t&quot; is alias for GPT-4 Turbo&#41;:</p> <pre><code class="julia hljs"><span class=hljs-comment ># we added model=&quot;gpt4t&quot; to use a better model</span>
msg = aiextract(:DetailOrientedTask; task=<span class=hljs-string >&quot;Extract biomeasurements&quot;</span>, data=str2, return_type=ManyBioMeasurement, model=<span class=hljs-string >&quot;gpt4t&quot;</span>)</code></pre> <pre><code class="plaintext hljs">[ Info: Tokens: 262 @ Cost: \$0.0042 in 3.5 seconds
PromptingTools.DataMessage(ManyBioMeasurement)

ManyBioMeasurement(BioMeasurement[BioMeasurement(&quot;Joe&quot;, 19, 80, Kilograms), BioMeasurement(&quot;Sarah&quot;, 30, 250, Pounds)])</code></pre> <p>It worked&#33; We got Joe&#39;s age right and still paid less than half a cent.</p> <p>A few words of caution before you start extracting the whole internet.</p> <h2 id=llm_security_the_risk_of_prompt_injection ><a href="#llm_security_the_risk_of_prompt_injection" class=header-anchor >LLM Security: The Risk of Prompt Injection</a></h2> <p>When using any Language Model &#40;LLM&#41;, like in PromptingTools.jl, it&#39;s crucial to be aware of <strong>prompt injection</strong> risks, especially when scanning unknown data sources. For a more detailed introduction to prompt injections, check out <a href="https://www.redsentry.com/blog/what-is-prompt-injection">this article</a>.</p> <p>Prompt injection occurs when malicious content is embedded in the data being analyzed. This is particularly risky when your LLM accesses private information. For instance, while OpenAI&#39;s models present less risk, tools like Microsoft Copilot, which might access sensitive data, can be more vulnerable.</p> <p>Imagine using an extractor to find an email on a website, but stumbling upon a hidden, malicious prompt—like white text on a white background. This could hijack your LLM, leading it to output incorrect, potentially harmful information, or even compromise your private data.</p> <p>While these scenarios are not meant to scare you, they highlight the importance of being vigilant. Always consider the potential risks of running LLMs on data you don’t control, and assess whether these risks are acceptable for your project.</p> <h2 id=wrap-up_embrace_the_future_of_data_extraction ><a href="#wrap-up_embrace_the_future_of_data_extraction" class=header-anchor >Wrap-Up: Embrace the Future of Data Extraction</a></h2> <p>So, there you have it&#33; <code>aiextract</code> from PromptingTools.jl should become your go-to solution for small to medium data extraction jobs from any text source. It&#39;s fast, efficient, and, honestly, a bit magical. Dive into the world of <code>aiextract</code> and watch your productivity soar&#33; 🚀👩‍💻👨</p> <div class=page-foot > <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> Jan Siml. Last modified: April 20, 2024. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. See the <a href="/privacy_policy/">Privacy Policy</a> </div> </div> </main> <script src="/libs/vela/metisMenu.min.js"></script> <script src="/libs/vela/slideout.min.js"></script> <script src="/libs/highlight/highlight.min.js"></script> <script>hljs.highlightAll();hljs.configure({tabReplace: ' '});</script>