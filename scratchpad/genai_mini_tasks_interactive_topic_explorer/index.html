<!doctype html> <html lang=en > <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-M28VNQP');</script> <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/highlight/styles/github.min.css"> <link href="/css/franklin.css" rel=stylesheet > <link href="/css/vela.css" rel=stylesheet > <script src="/libs/vela/jquery.min.js"></script> <link rel=icon  href="/assets/favicon.png"> <title>Jan's Scratchpad</title> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M28VNQP" height=0  width=0  style="display:none;visibility:hidden"></iframe></noscript> <div class="main-nav slideout-menu slideout-menu-left" id=menu > <div class=flex-container > <span class=sidebar-brand > <h3 style='font-size: 25px'>Scratchpad</h3> </span> </div> <nav class=sidebar-nav > <ul class=metismenu  id=metismenu  > <li><a href="/index.html">Home</a> <li><a href="/scratchpad/">Posts</a> <li><a href="/about/">About</a> <li><a href="/tag/">Tags</a> <li><a href="/privacy_policy/">Privacy Policy</a> <li><a href="/cookie_policy/">Cookie Policy</a> </ul> </nav> </div> <main id=panel  class="slidout-panel slideout-panel-left"> <div class="toggle-button hamburger hamburger--spin"> <div class=hamburger-box > <div class=hamburger-inner ></div> </div> </div> <h1 class="page title">GenAI Mini-Tasks: Interactive Topic Explorer With LLMTextAnalysis.jl</h1> <hr> <div class=franklin-content ><h1 id=tldr ><a href="#tldr" class=header-anchor >TL;DR</a></h1> <p>Discover the power of generative AI in data analysis with our tutorial on <a href="https://github.com/svilupp/LLMTextAnalysis.jl">LLMTextAnalysis.jl</a>, a tool that transforms the way you explore and visualize key themes in large text datasets, making deep insights accessible in minutes rather than hours.</p> <p><div class=franklin-toc ><ol><li><a href="#genai_mini-tasks_interactive_topic_explorer_with_llmtextanalysisjl">GenAI Mini-Tasks: Interactive Topic Explorer With LLMTextAnalysis.jl</a><li><a href="#exploration_with_llmtextanalysisjl">Exploration with LLMTextAnalysis.jl</a><ol><li><a href="#setting_up_the_environment">Setting Up the Environment</a><li><a href="#data_preparation">Data Preparation</a><li><a href="#performing_topic_analysis">Performing Topic Analysis</a><li><a href="#visualizing_topics">Visualizing Topics</a><li><a href="#advanced_tips">Advanced Tips</a></ol><li><a href="#conclusion">Conclusion</a></ol></div> </p> <h2 id=genai_mini-tasks_interactive_topic_explorer_with_llmtextanalysisjl ><a href="#genai_mini-tasks_interactive_topic_explorer_with_llmtextanalysisjl" class=header-anchor >GenAI Mini-Tasks: Interactive Topic Explorer With LLMTextAnalysis.jl</a></h2> <p>Welcome back to our &quot;GenAI Mini-Tasks&quot; series, where we showcase how generative AI can boost everyday tasks. Today, we&#39;re excited to introduce a powerful tool that exemplifies this series perfectly: the &quot;Interactive Topic Explorer&quot; using <a href="https://github.com/svilupp/LLMTextAnalysis.jl">LLMTextAnalysis.jl</a>.</p> <p>In this instalment, we&#39;re focusing on how you can quickly surface the themes at different &quot;levels&quot; in your text datasets &#40;eg, the top 3 themes, sub-themes, individual texts, ...&#41;, a task that traditionally requires hours of slicing, dicing, and eventually reading the various texts. With <a href="https://github.com/svilupp/LLMTextAnalysis.jl">LLMTextAnalysis.jl</a>, you can now gain insights in minutes, transforming the way you interact with large text datasets.</p> <h2 id=exploration_with_llmtextanalysisjl ><a href="#exploration_with_llmtextanalysisjl" class=header-anchor >Exploration with LLMTextAnalysis.jl</a></h2> <p>To power the analyses, LLMTextAnalysis.jl uses large language models to produce &quot;embeddings&quot; &#40;ie, translate texts into vectors of numbers&#41;, which allows us to leverage semantic similarity between the texts. </p> <p>This enables you to:</p> <ol> <li><p><strong>Efficiently Identify Key Themes</strong>: Extract main themes from your text data swiftly, bypassing the need to read each entry.</p> <li><p><strong>Interactively Explore the Data</strong>: Use PlotlyJS to create dynamic, interactive visualizations that make data exploration engaging and insightful. &#40;Looking into supporting Makie.jl as well&#41;</p> <li><p><strong>Adapt the Level of Depth</strong>: Tailor your exploration depth based on your needs, from high-level themes to individual texts.</p> </ol> <p>Now, let&#39;s dive into how you can use LLMTextAnalysis.jl to explore text data.</p> <h3 id=setting_up_the_environment ><a href="#setting_up_the_environment" class=header-anchor >Setting Up the Environment</a></h3> <p>Begin by setting up your Julia environment with the required packages:</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> Downloads, CSV, DataFrames
<span class=hljs-keyword >using</span> Plots
<span class=hljs-keyword >using</span> LLMTextAnalysis
plotlyjs(); <span class=hljs-comment ># recommended backend for interactivity</span></code></pre> <p>Install them as necessary &#40;eg, <code>using Pkg; Pkg.add&#40;&#91;&quot;LLMTextAnalysis&quot;, &quot;Plots&quot;, &quot;PlotlyJS&quot;&#93;&#41;</code>&#41;.</p> <h3 id=data_preparation ><a href="#data_preparation" class=header-anchor >Data Preparation</a></h3> <p>We&#39;ll use a real-world dataset for this example, a community survey for the City of Austin in Texas, US. Let&#39;s download and read the data:</p> <pre><code class="julia hljs">Downloads.download(<span class=hljs-string >&quot;https://data.austintexas.gov/api/views/s2py-ceb7/rows.csv?accessType=DOWNLOAD&quot;</span>,
    joinpath(<span class=hljs-meta >@__DIR__</span>, <span class=hljs-string >&quot;cityofaustin.csv&quot;</span>));
df = CSV.read(joinpath(<span class=hljs-meta >@__DIR__</span>, <span class=hljs-string >&quot;cityofaustin.csv&quot;</span>), DataFrame);</code></pre> <p>As an example, let&#39;s focus on a specific open-ended question for analysis:</p> <pre><code class="julia hljs">col = <span class=hljs-string >&quot;Q25 - If there was one thing you could share with the Mayor regarding the City of Austin (any comment, suggestion, etc.), what would it be?&quot;</span>
docs = df[!, col] |&gt; skipmissing |&gt; collect;</code></pre> <h3 id=performing_topic_analysis ><a href="#performing_topic_analysis" class=header-anchor >Performing Topic Analysis</a></h3> <p>Create an index of the documents &#40;embeddings&#41;:</p> <pre><code class="julia hljs">index = build_index(docs)</code></pre>
<h3 id=visualizing_topics ><a href="#visualizing_topics" class=header-anchor >Visualizing Topics</a></h3>
<p>Generate interactive visualizations to explore the themes:</p>
<pre><code class="julia hljs">pl = plot(index; title = <span class=hljs-string >&quot;City of Austin Community Survey Themes&quot;</span>, labeler_kwargs = (; model = <span class=hljs-string >&quot;gpt3t&quot;</span>,))</code></pre>
<p><img src="/assets/genai_mini_tasks_interactive_topic_explorer/austin_scatter.png" alt="City of Austin Community Survey Themes" /></p>
<p>The screenshot doesn&#39;t do it justice, so check out the <a href="https://svilupp.github.io/LLMTextAnalysis.jl/dev/examples/1_topics_in_city_of_austin_community_survey">interactive version</a>.</p>
<p>A few words on <code>plot</code>:</p>
<ul>
<li><p>It uses <code>Plots.jl</code> to create the plot &#40;and PlotlyJS as a backend&#41;</p>

<li><p>It calls intermediary steps under the hood &#40;clustering, labeling, ...&#41;. See the docs for more details.</p>

<li><p>You use any keywords that you&#39;re used to from Plots.jl, eg, to customize the <code>title</code> or <code>size</code></p>

<li><p><code>labeler_kwargs</code> allows us to control the LLM labeling of topics, I like the latest GPT-3.5-Turbo-1106 for the labeling. We can use any kwargs from PromptingTools.jl</p>

<li><p>You can specify the number of topics to show with <code>k</code>, or the height of the dendrogram to cut at with <code>h</code> &#40;see <code>?Clustering.hclust</code>&#41;</p>

</ul>
<h3 id=advanced_tips ><a href="#advanced_tips" class=header-anchor >Advanced Tips</a></h3>
<ol>
<li><p><strong>Zooming In/Out on Topic Depth</strong>: Adjust the level of thematic detail as needed.</p>

</ol>
<p>One of the biggest superpowers of LLMs, is that you can zoom in/out in the abstraction level to help you digest information more gradually.</p>
<pre><code class="julia hljs"><span class=hljs-comment ># For example, we can start by looking at the top-level themes with `k=4`:</span>
pl4 = plot(index; k = <span class=hljs-number >4</span>, labeler_kwargs = (; model = <span class=hljs-string >&quot;gpt3t&quot;</span>))
pl4</code></pre>
<p><img src="/assets/genai_mini_tasks_interactive_topic_explorer/austin_scatter_k4.png" alt="City of Austin Community Survey Themes" /></p>
<p>Now, we have both the top-level themes and the sub-themes available in <code>index.topic_levels</code>, so we can easily switch between them.</p>
<ol start=2 >
<li><p><strong>Serializing the Index</strong>: Save your index for future use without reprocessing.</p>

</ol>
<p>We don&#39;t want to recompute the index and topics every time we want to explore it, so we can serialize it to disk and load it back later.</p>
<pre><code class="julia hljs"><span class=hljs-keyword >using</span> Serialization
 serialize(<span class=hljs-string >&quot;austin-index.jls&quot;</span>, index)
 index = deserialize(<span class=hljs-string >&quot;austin-index.jls&quot;</span>)</code></pre>
<ol start=3 >
<li><p><strong>Interactive Features in PlotlyJS</strong>: Engage deeply with your data through interactive visual elements.</p>

</ol>
<p>Remember that with PlotlyJS backend, you can zoom in/out, pan, and hover over the points to see the document text. Also, by single-clicking / double-clicking on the topics in the legend, you can hide/show the topics.</p>
<h2 id=conclusion ><a href="#conclusion" class=header-anchor >Conclusion</a></h2>
<p>The &quot;Interactive Topic Explorer&quot; with <a href="https://github.com/svilupp/LLMTextAnalysis.jl">LLMTextAnalysis.jl</a> is a prime example of how generative AI together with your existing Julia tools can significantly enhance productivity and insight in data analysis. It&#39;s not just a tool; it&#39;s a new way to interact with your data, bringing efficiency and depth to your analysis processes.</p>
<p>Stay tuned for more GenAI mini tasks, where we continue to explore practical, impactful uses of generative AI in everyday scenarios&#33;</p>
<div class=page-foot >
    <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> Jan Siml. Last modified: January 11, 2024.
    Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. See the <a href="/privacy_policy/">Privacy Policy</a>
</div>
</div>
  </main> 
  <script src="/libs/vela/metisMenu.min.js"></script>
  <script src="/libs/vela/slideout.min.js"></script>
  
  
    <script src="/libs/highlight/highlight.min.js"></script>
<script>hljs.highlightAll();hljs.configure({tabReplace: '    '});</script>